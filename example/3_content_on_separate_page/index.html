<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>My Website - Book</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" type="text/css" href="book.css" />
</head>

<body>

	<script type="text/javascript" src="../../build/bindery.js"></script>
	<script>
			Bindery.makeBook({
			  source: {
					url: 'content.html',
					selector: ".content",
				},
			  rules: [
					Bindery.PageBreak({ selector: 'h2', position: 'before', continue: 'right' }),
					Bindery.Footnote({
						selector: 'a',
						render: (elmt, number) => `<sup>${number}</sup> Link to <u>${elmt.getAttribute('href')}</u>`,
					}),
					Bindery.Spread({ selector: ".big-figure" }),
					Bindery.RunningHeader({
						beginSection: 'h2',
						render: (page) => {
							if (page.isEmpty) return '';
							else if (page.element.querySelector('h2')) return '';
							else if (page.isLeft) return `${page.number} · ${page.section} `;
							else if (page.isRight) return `John P. Author · ${page.number}`;
						},
					}),
					Bindery.PageReference({
						selector: ".toc a",
						replace: (element, number) => {
							let row = document.createElement('div');
							row.innerHTML = `${element.textContent}`;
							row.innerHTML += `<span style='float: right;'>${number}</span>`;
							return row;
						}
					}),
			  ],
			});

	</script>
</body>
</html>
